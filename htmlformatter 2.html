<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¡°ì„  ê°œí˜ í€´ì¦ˆ (ë°œí‘œìë£Œ ê¸°ë°˜)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Jua í°íŠ¸ ì„í¬íŠ¸ */
        @import url('https://fonts.googleapis.com/css2?family=Jua&display=swap');

        body {
            /* ëª¨ë“  í°íŠ¸ë¥¼ Juaë¡œ ë³€ê²½ */
            font-family: 'Jua', sans-serif;
            background-color: #fff7ed; /* Orange-50 */
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .correct-anim { animation: bounce 0.5s; }
        .wrong-anim { animation: shake 0.5s; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .loader {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #f97316;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* AI ì„¤ëª… ì˜ì—­ ìŠ¤íƒ€ì¼ */
        .ai-content strong { font-weight: normal; color: #c2410c; } /* JuaëŠ” boldê°€ ë”°ë¡œ ì—†ì–´ ìƒ‰ìƒìœ¼ë¡œ ê°•ì¡° */
        .ai-content ul { list-style-type: disc; margin-left: 1.5rem; margin-top: 0.5rem; }
        .ai-content li { margin-bottom: 0.25rem; }
    </style>
</head>
<body class="bg-orange-50 min-h-screen flex items-center justify-center p-4">

    <div class="max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden relative" style="min-height: 750px;">
        
        <div class="bg-orange-600 p-4 text-white text-center relative z-10 shadow-md">
            <h1 class="text-2xl font-bold">ì‚¬íšŒ ëª¨ë‘  ë°œí‘œ ë³µìŠµ</h1>
            <p class="text-lg opacity-90">ë°œí‘œ ìë£Œ í•µì‹¬ ì™ì™!</p>
        </div>

        <div id="progress-container" class="hidden w-full bg-gray-200 h-2">
            <div id="progress-bar" class="bg-orange-400 h-2 transition-all duration-300" style="width: 0%"></div>
        </div>

        <div id="start-screen" class="absolute inset-0 flex flex-col items-center justify-center p-6 bg-white z-0 fade-in">
            <!-- ìš”ì²­í•˜ì‹  ì´ë¯¸ì§€ ì ìš© -->
            <div class="mb-8">
                <img src="Rm1UA8R0k2ksp-KomfB-vQmNiYf9ZLW7FLWXz_0Ioanp0EmUBfKGUP1CS9fvkDoG-tNQGz6UNbXiKsp5KG6E9g.png" 
                     alt="ì¡°ì„  ê°œí˜ ìºë¦­í„°" 
                     class="w-56 h-56 object-contain mx-auto drop-shadow-xl transform hover:scale-105 transition duration-300"
                     onerror="this.style.display='none'; document.getElementById('fallback-icon').style.display='block';">
                <div id="fallback-icon" class="text-8xl text-orange-500 transform rotate-12 hidden">
                    <i class="fas fa-book-reader"></i>
                </div>
            </div>

            <!-- ìš”ì²­í•˜ì‹  ì œëª© ì ìš© -->
            <h2 class="text-4xl font-bold mb-12 text-gray-800">ì¡°ì„  ê°œí˜ í€´ì¦ˆ</h2>
            
            <button onclick="game.start()" class="w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-4 rounded-xl shadow-lg transition transform hover:scale-105 text-2xl">
                ë¬¸ì œ í’€ê¸° ì‹œì‘
            </button>
        </div>

        <!-- ìˆ˜ì •ëœ ë¶€ë¶„: padding-topì„ 80pxì—ì„œ 150pxë¡œ ë³€ê²½í•˜ì—¬ ê²¹ì¹¨ í˜„ìƒ í•´ê²° -->
        <div id="quiz-screen" class="hidden absolute inset-0 flex flex-col p-6 overflow-y-auto bg-white z-0" style="padding-top: 150px; padding-bottom: 120px;">
            <div class="mb-4 flex items-center justify-between">
                <span class="px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-lg shadow-sm">
                    Q<span id="q-current">1</span> / <span id="q-total">25</span>
                </span>
                <span id="score-badge" class="text-orange-600 text-lg bg-orange-50 px-2 py-1 rounded">0ì </span>
            </div>

            <h3 id="question-text" class="text-2xl text-gray-800 mb-8 leading-snug break-keep">
                ë¬¸ì œ ë¡œë”© ì¤‘...
            </h3>

            <div id="options-area" class="flex flex-col gap-3">
                <!-- Buttons injected here -->
            </div>
        </div>

        <div id="feedback-area" class="hidden absolute bottom-0 left-0 right-0 bg-white border-t-2 border-orange-100 p-5 rounded-t-2xl shadow-[0_-5px_20px_rgba(0,0,0,0.1)] z-20 fade-in max-h-[80vh] overflow-y-auto flex flex-col">
            
            <div class="flex gap-4 mb-4">
                <div id="feedback-icon" class="text-4xl shrink-0 pt-1"></div>
                <div class="flex-1">
                    <p id="feedback-result" class="text-2xl mb-1"></p>
                    <p id="feedback-detail" class="text-lg text-gray-600 mb-1 leading-relaxed"></p>
                </div>
            </div>

            <div class="border-t border-gray-100 pt-3 mb-3">
                <button id="ai-btn" onclick="game.askAI()" class="w-full bg-indigo-50 text-indigo-700 py-3 rounded-xl hover:bg-indigo-100 transition border border-indigo-200 flex items-center justify-center gap-2 mb-3 text-lg">
                    <i class="fas fa-robot"></i> AI ì„ ìƒë‹˜ê»˜ ìì„¸í•œ í•´ì„¤ ë“£ê¸°
                </button>
                
                <div id="ai-response-area" class="hidden bg-gray-50 p-4 rounded-xl border border-gray-200 text-lg text-gray-700 leading-relaxed ai-content mb-3">
                    <!-- AI Content goes here -->
                </div>
            </div>

            <button onclick="game.nextQuestion()" class="w-full bg-orange-600 text-white py-3 rounded-xl hover:bg-orange-700 transition shadow-md sticky bottom-0 text-xl">
                ë‹¤ìŒ ë¬¸ì œ <i class="fas fa-arrow-right ml-1"></i>
            </button>
        </div>

        <div id="result-screen" class="hidden absolute inset-0 flex flex-col items-center justify-center p-6 bg-white z-0">
            <h2 class="text-4xl text-gray-800 mb-2">ìµœì¢… ê²°ê³¼</h2>
            <div class="text-7xl text-orange-600 mb-4">
                <span id="final-score">0</span>ì 
            </div>
            <p id="result-msg" class="text-gray-600 mb-8 text-center text-2xl leading-relaxed"></p>
            
            <div class="w-full bg-gray-50 p-6 rounded-xl mb-6 border border-gray-100">
                <div class="flex justify-between mb-2 text-lg text-gray-500">
                    <span>ì •ë‹µë¥ </span>
                    <span id="final-percent">0%</span>
                </div>
                <div class="w-full bg-gray-200 h-3 rounded-full overflow-hidden">
                    <div id="result-bar" class="bg-orange-500 h-full" style="width: 0%"></div>
                </div>
            </div>

            <button onclick="game.restart()" class="w-full bg-white border-2 border-orange-600 text-orange-600 py-3 rounded-xl hover:bg-orange-50 transition text-2xl">
                <i class="fas fa-redo mr-2"></i>ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
            </button>
        </div>
    </div>

    <script>
        const apiKey = ""; // API Key injected by environment

        // PDF ìë£Œ í…ìŠ¤íŠ¸ì— ê¸°ë°˜í•œ 25ë¬¸ì œ
        const questionsSource = [
            // --- ê°‘ì‹ ì •ë³€ (8ë¬¸ì œ) ---
            {
                q: "ê°‘ì‹ ì •ë³€ì„ ì£¼ë„í•œ ê¸‰ì§„ ì„¸ë ¥ì´ ê°€ì¥ ê°•ë ¥í•˜ê²Œ ì£¼ì¥í•œ ë‚´ìš©ì€?",
                a: ["ì²­ì˜ ê°„ì„­ íƒˆí”¼", "ì²­ê³¼ì˜ ë™ë§¹ ê°•í™”", "ì¼ë³¸ê³¼ì˜ ì „ìŸ", "ë¯¸êµ­ê³¼ì˜ ìˆ˜êµ"],
                correct: 0,
                desc: "ë°œí‘œ ìë£Œì— ë”°ë¥´ë©´ ê¸‰ì§„ ì„¸ë ¥ì€ 'ì¡°ì„ ì´ ì²­ë‚˜ë¼ì˜ ê°„ì„­ì—ì„œ ë²—ì–´ë‚˜ì•¼ í•¨'ì„ ì£¼ì¥í–ˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ê°‘ì‹ ì •ë³€ì„ ì¼ìœ¼í‚¨ ì„¸ë ¥ì€ ëˆ„êµ¬ì˜ êµ°ì‚¬ì  ì§€ì›ì„ ì•½ì†ë°›ì•˜ë‚˜ìš”?",
                a: ["ì¼ë³¸", "ì²­ë‚˜ë¼", "ëŸ¬ì‹œì•„", "ë¯¸êµ­"],
                correct: 0,
                desc: "ìë£Œì— 'ì¼ë³¸ì˜ êµ°ì‚¬ ì§€ì›ì„ ì•½ì†ë°›ê³  ì •ë³€ì„ ì¼ìœ¼í‚´'ì´ë¼ê³  ëª…ì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ê°‘ì‹ ì •ë³€ì´ ì¼ì–´ë‚œ ê¸°ê°„ì€ ë©°ì¹ ì¸ê°€ìš”?",
                a: ["3ì¼", "5ì¼", "7ì¼", "10ì¼"],
                correct: 0,
                desc: "ìë£Œì— 'ê²°ê³¼: 3ì¼ ë§Œì— ì‹¤íŒ¨ë¡œ ëë‚¨'ì´ë¼ê³  ë˜ì–´ ìˆì–´ '3ì¼ ì²œí•˜'ë¼ê³ ë„ ë¶ˆë¦½ë‹ˆë‹¤."
            },
            {
                q: "ê°‘ì‹ ì •ë³€ ì‹¤íŒ¨ì˜ ì£¼ìš” ì›ì¸ìœ¼ë¡œ ìë£Œì— ì–¸ê¸‰ëœ ê²ƒì€?",
                a: ["ì¼ë³¸ì´ ì•½ì†ì„ ì§€í‚¤ì§€ ì•ŠìŒ", "ë¯¸êµ­ì˜ ë°©í•´", "ëŸ¬ì‹œì•„ì˜ ë°°ì‹ ", "ìê¸ˆ ë¶€ì¡±"],
                correct: 0,
                desc: "ìë£Œì— 'ì›ì¸: ì¼ë³¸ì´ ì•½ì†ì„ ì§€í‚¤ì§€ ì•ŠìŒ, ì²­ì˜ êµ°ì‚¬ì  ê°œì…'ì´ë¼ê³  ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ê°‘ì‹ ì •ë³€ ì‹¤íŒ¨ í›„ ì¡°ì„ ì— ë¯¸ì¹œ ì˜í–¥ì€?",
                a: ["ì²­ì˜ ê°„ì„­ì´ ë”ìš± ì‹¬í•´ì§", "ì¼ë³¸ì˜ ì‹ë¯¼ì§€ê°€ ë¨", "ì™„ì „í•œ ìì£¼ ë…ë¦½ ë‹¬ì„±", "ì„œì–‘ ì—´ê°•ì˜ ì² ìˆ˜"],
                correct: 0,
                desc: "ìë£Œì— 'ê°‘ì‹ ì •ë³€ì˜ ì‹¤íŒ¨ë¡œ ì¸í•´ ì¡°ì„ ì— ëŒ€í•œ ì²­ì˜ ê°„ì„­ì´ ë”ìš± ì‹¬í•´ì§'ì´ë¼ê³  ì í˜€ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ë‹¤ìŒ ì¤‘ ê°‘ì‹ ì •ë³€ì„ ì¼ìœ¼í‚¨ ì£¼ìš” ì¸ë¬¼ì´ ì•„ë‹Œ ì‚¬ëŒì€?",
                a: ["ì „ë´‰ì¤€", "ê¹€ì˜¥ê· ", "ë°•ì˜íš¨", "ì„œì¬í•„"],
                correct: 0,
                desc: "ìë£Œì˜ [ê°‘ì‹ ì •ë³€ì„ ì¼ìœ¼í‚¨ ì£¼ìš” ì¸ë¬¼ë“¤]ì— ê¹€ì˜¥ê· , ë°•ì˜íš¨, ì„œê´‘ë²”, ì„œì¬í•„ì´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ê¸‰ì§„ ê°œí™”íŒŒëŠ” ì„œì–‘ì˜ ê¸°ìˆ ë¿ë§Œ ì•„ë‹ˆë¼ ë¬´ì—‡ê¹Œì§€ ë°›ì•„ë“¤ì—¬ì•¼ í•œë‹¤ê³  ì£¼ì¥í–ˆë‚˜ìš”?",
                a: ["ì œë„ì™€ ì‚¬ìƒ", "ì¢…êµì™€ ì–¸ì–´", "ìŒì‹ê³¼ ì˜ë³µ", "êµ°ì‚¬ í›ˆë ¨ë²•ë§Œ"],
                correct: 0,
                desc: "ìë£Œì— 'ì„œì–‘ì˜ ê¸°ìˆ ë¿ë§Œ ì•„ë‹ˆë¼ ì œë„ì™€ ì‚¬ìƒê¹Œì§€ ë°›ì•„ë“¤ì—¬ì•¼ í•œë‹¤ê³  ìƒê°'ì´ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ê°‘ì‹ ì •ë³€ì„ ì¼ìœ¼í‚¨ ì„¸ë ¥ì´ ëª©í‘œë¡œ í–ˆë˜ ê²ƒì€?",
                a: ["ìì‹ ë“¤ì´ ì›í•˜ëŠ” ë°©ì‹ì˜ ê°œí˜ ì •ì±… ì¶”ì§„", "ì™•ê¶Œì˜ ë¬´í•œí•œ ê°•í™”", "ì²­ë‚˜ë¼ì˜ ì†êµ­ ìœ ì§€", "ê³¼ê±° ì œë„ ë¶€í™œ"],
                correct: 0,
                desc: "ìë£Œì— 'ì •ê¶Œì„ ì°¨ì§€í•˜ì—¬ ìì‹ ë“¤ì´ ì›í•˜ëŠ” ë°©ì‹ì˜ ê°œí˜ ì •ì±… ì¶”ì§„'ì´ ëª©í‘œë¡œ ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤."
            },

            // --- ë™í•™ ë†ë¯¼ ìš´ë™ (2ë¬¸ì œ) ---
            {
                q: "ë™í•™ ë†ë¯¼ ìš´ë™ì˜ ë°°ê²½ìœ¼ë¡œ ìë£Œì— ì–¸ê¸‰ëœ ë‚´ìš©ì€?",
                a: ["ë†ë¯¼ë“¤ ì‚¬ì´ì— ë™í•™ì´ ë„ë¦¬ í¼ì§", "ì„œì–‘ ì¢…êµì˜ ì „íŒŒ", "ì¼ë³¸ì˜ í† ì§€ ì•½íƒˆ", "ì‹ ë¶„ì œì˜ ê°•í™”"],
                correct: 0,
                desc: "ìë£Œì— 'ë°°ê²½: ë†ë¯¼ë“¤ ì‚¬ì´ì— ë™í•™ì´ ë„ë¦¬ í¼ì§'ì´ë¼ê³  ëª…ì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ë™í•™ ë†ë¯¼ ìš´ë™ì´ ê·¼ëŒ€ êµ­ê°€ë¡œì˜ ì „í™˜ì— ë¯¸ì¹œ ì˜í–¥ì€?",
                a: ["ê·¼ëŒ€ì  êµ­ê°€ì˜ ë°œíŒì´ ë¨", "ì™•ê¶Œì„ ê°•í™”ì‹œí‚¤ëŠ” ê³„ê¸°ê°€ ë¨", "ì‹ ë¶„ì œë¥¼ ê³ ì°©í™”í•¨", "ì™¸ì„¸ ì˜ì¡´ë„ë¥¼ ë†’ì„"],
                correct: 0,
                desc: "ìë£Œì— 'ê·¼ëŒ€ êµ­ê°€ë¡œì˜ ì „í™˜ : ê·¼ëŒ€ì  êµ­ê°€ì˜ ë°œíŒì´ ë¨'ì´ë¼ê³  ì í˜€ ìˆìŠµë‹ˆë‹¤."
            },

            // --- 1ì°¨ ê°‘ì˜¤ê°œí˜ (10ë¬¸ì œ) ---
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ì˜ ì •ì¹˜ì  ê°œí˜ ì¤‘ ì‹ ë¶„ê³¼ ìƒê´€ì—†ì´ ê´€ë¦¬ë¥¼ ì„ ë°œí•˜ê¸° ìœ„í•´ íì§€í•œ ê²ƒì€?",
                a: ["ê³¼ê±°ì œ", "ìŒì„œì œ", "í˜¸í¬ì œ", "ê³¨í’ˆì œ"],
                correct: 0,
                desc: "ìë£Œì— 'ê³¼ê±°ì œ íì§€ : ì‹ ë¶„ì— ìƒê´€ ì—†ì´ ê´€ë¦¬ë¥¼ ì„ ë°œ í•˜ë ¤ëŠ” ì‹œì‘'ì´ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ì—ì„œ ì™•ê¶Œì„ ì•½í™”ì‹œí‚¤ê³  ê¸°ëŠ¥ì„ ê°•í™”í•œ ê¸°êµ¬ëŠ”?",
                a: ["ì˜ì •ë¶€", "ë¹„ë³€ì‚¬", "ì‚¼ì‚¬", "ìŠ¹ì •ì›"],
                correct: 0,
                desc: "ìë£Œì— 'ì˜ì •ë¶€ ì¤‘ì‹¬ ì²´ì œ ê°•í™” : ì™•ê¶Œì„ ì•½í™”ì‹œí‚´'ì´ë¼ê³  ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ì—ì„œ ì¡°ì„ ì˜ ì¤‘ì•™ ì§‘ê¶Œì  ë‚´ê° ì²´ì œë¥¼ ê°•í™”í•˜ê¸° ìœ„í•´ ê¸°ëŠ¥ì„ ì¶•ì†Œí•œ ê¸°êµ¬ëŠ”?",
                a: ["ì‚¼ì‚¬", "ì˜ì •ë¶€", "6ì¡°", "ì˜ê¸ˆë¶€"],
                correct: 0,
                desc: "ìë£Œì— 'ì‚¼ì‚¬ì˜ ê¸°ëŠ¥ ì¶•ì†Œ : ì¡°ì„ ì˜ ì¤‘ì•™ ì§‘ê¶Œì  ë‚´ê° ì²´ì œ ê°•í™”'ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ì˜ ê²½ì œì  ê°œí˜ìœ¼ë¡œ, ê¸°ì¡´ ì„¸ê¸ˆ ì œë„ë¥¼ í™”íë¡œ ë‚©ë¶€í•˜ê²Œ ë°”ê¾¼ ê²ƒì€?",
                a: ["ì¡°ì„¸ì˜ ê¸ˆë‚©í™”", "ì˜ì •ë²•", "ëŒ€ë™ë²•", "ê²°ì‘"],
                correct: 0,
                desc: "ìë£Œì— 'ì¡°ì„¸ ì œë„ì˜ ê°œí¸ : ê¸°ì¡´ì˜ ì„¸ê¸ˆ ì œë„ë¥¼ ê¸‰ë‚©í™”(ê¸ˆë‚©í™”)í•˜ì—¬ í™”íë¡œ ë‚©ë¶€'ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ ê²½ì œ ê°œí˜ ì¤‘ íš¨ìœ¨ì„±ê³¼ ê²½ì œì„±ì„ ë†’ì´ê¸° ìœ„í•´ í†µì¼í•œ ê²ƒì€?",
                a: ["ë„ëŸ‰í˜•", "ë¬¸ì", "í™”í ë””ìì¸", "ìˆ˜ë ˆ ë°”í€´"],
                correct: 0,
                desc: "ìë£Œì— 'ë„ëŸ‰í˜• í†µì¼ : ë„ëŸ‰ì„ í†µì¼í•´ì„œ íš¨ìœ¨ì„±ê³¼ ê²½ì œì„±ì„ ë†’ì„'ì´ë¼ê³  ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ì—ì„œ ìƒê³µì—… ì§„í¥ì„ ìœ„í•´ ì‹¤ì‹œí•œ ì •ì±…ì€?",
                a: ["ìƒì—… ììœ í™”", "ìƒì—… ì–µì œ", "êµ­ê°€ ë…ì  ë¬´ì—­", "ì™¸êµ­ ìƒì¸ ì¶”ë°©"],
                correct: 0,
                desc: "ìë£Œì— 'ìƒì—… ììœ í™” : ìƒì—…ì— ëŒ€í•œ ì œí•œ ì™„í™”, ìƒê³µì—… ì§„í¥'ì´ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ì˜ ì‚¬íšŒì  ê°œí˜ ì¤‘ í‰ë“±í•œ ì‚¬íšŒì˜ í† ëŒ€ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ íì§€í•œ ê²ƒì€?",
                a: ["ì‹ ë¶„ì œ", "í˜¸ì ì œ", "êµ°ì—­ì œ", "ê³¼ê±°ì œ"],
                correct: 0,
                desc: "ìë£Œì— 'ì‹ ë¶„ì œ íì§€ : ì°¨ë³„ì´ ì—†ê²Œ í•˜ì—¬ í‰ë“±í•œ ì‚¬íšŒì˜ í† ëŒ€'ë¼ê³  ëª…ì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ì—ì„œ ë†ë¯¼ê³¼ í•˜ì¸µë¯¼ì˜ ì‚¶ì˜ ì§ˆ í–¥ìƒì„ ìœ„í•´ íì§€í•œ ì œë„ëŠ”?",
                a: ["ë…¸ë¹„ì œ", "ì†Œì‘ì œ", "ê³ ë¦¬ëŒ€", "í™˜ê³¡"],
                correct: 0,
                desc: "ìë£Œì— 'ë…¸ë¹„ì œ íì§€ : ë†ë¯¼ê³¼ í•˜ì¸µë¯¼ì˜ ì‚¶ì˜ ì§ˆ í–¥ìƒ'ì´ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ì—ì„œ ì–´ë¦°ì´ì™€ ì—¬ì„±ì˜ ê¶Œë¦¬ ë³´ì¥ì„ ìœ„í•´ ê¸ˆì§€í•œ ê²ƒì€?",
                a: ["ì¡°í˜¼(ì¼ì° ê²°í˜¼)", "ì¬í˜¼", "ìƒì†", "êµìœ¡"],
                correct: 0,
                desc: "ìë£Œì— 'ì¡°í˜¼ ê¸ˆì§€ : ì–´ë¦°ì´ì™€ ì—¬ì„±ì˜ ê¶Œë¦¬ ë³´ì¥'ì´ë¼ê³  ëª…ì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ì˜ êµ°ì‚¬ì  ê°œí˜ ë‚´ìš©ì€?",
                a: ["êµ°ì‚¬ ì¡°ì§ ì¬í¸ì„±", "ë³„ê¸°êµ° ì°½ì„¤", "í›ˆë ¨ë„ê° ì„¤ì¹˜", "í•´êµ° ì–‘ì„±"],
                correct: 0,
                desc: "ìë£Œì— 'êµ°ì‚¬ ì¡°ì§ ì¬í¸ì„± : ê·¼ëŒ€ì  êµ°ì‚¬ ë„ì…ì˜ ì´ˆì„ ë§ˆë ¨'ì´ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },

            // --- 2ì°¨ ê°‘ì˜¤ê°œí˜ (4ë¬¸ì œ) ---
            {
                q: "2ì°¨ ê°‘ì˜¤ê°œí˜ ë•Œ ì¡°ì„ ì´ ë‚˜ê°ˆ ê·¼ëŒ€ì  ë°©í–¥ì„ ì œì‹œí•˜ë©° ë°œí‘œí•œ ë¬¸ì„œëŠ”?",
                a: ["í™ë²” 14ì¡°", "í—Œì˜ 6ì¡°", "ë…ë¦½ ì„ ì–¸ì„œ", "ê²½êµ­ëŒ€ì „"],
                correct: 0,
                desc: "ìë£Œì— 'í™ë²” 14ì¡° ë°œí‘œ : ì¡°ì„ ì´ ë‚˜ê°ˆ ê·¼ëŒ€ì  ë°©í–¥ì„ ì œì‹œí•œ ë¬¸ì„œ'ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "2ì°¨ ê°‘ì˜¤ê°œí˜ì˜ ì •ì¹˜ì  ê°œí˜ìœ¼ë¡œ ê°•í™”ëœ ì²´ì œëŠ”?",
                a: ["ë‚´ê° ì¤‘ì‹¬ì œ", "ì™•ê¶Œ ì¤‘ì‹¬ì œ", "ì˜íšŒ ì¤‘ì‹¬ì œ", "ì§€ë°© ë¶„ê¶Œì œ"],
                correct: 0,
                desc: "ìë£Œì— 'ë‚´ê° ì¤‘ì‹¬ì œ ê°•í™” : ê·¼ëŒ€ì  ê´€ë£Œì œ í™•ë¦½'ì´ë¼ê³  ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "2ì°¨ ê°‘ì˜¤ê°œí˜ì—ì„œ êµ­ê°€ ì¬ì •ì„ íˆ¬ëª…í•˜ê²Œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ë„ì…í•œ ì œë„ëŠ”?",
                a: ["ì˜ˆì‚°ì œ", "í˜¸í¬ì œ", "ë‹¹ë°±ì „", "ê²°ì‘"],
                correct: 0,
                desc: "ìë£Œì— 'ì˜ˆì‚°ì œ ë„ì… : êµ­ê°€ ì¬ì •ì„ íˆ¬ëª…í•˜ê²Œ ê´€ë¦¬í•˜ê³ ì ê·¼ëŒ€ì  ì œë„ ë„ì…'ì´ë¼ê³  ì í˜€ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "2ì°¨ ê°‘ì˜¤ê°œí˜ì—ì„œ ì‹¤ì‹œí•œ í™”í ì œë„ëŠ”?",
                a: ["ì€ë³¸ìœ„ í™”í ì œë„", "ê¸ˆë³¸ìœ„ í™”í ì œë„", "ë™ì „ ì „ìš© ì œë„", "ì§€í ì „ìš© ì œë„"],
                correct: 0,
                desc: "ìë£Œì— 'ì€ë³¸ìœ„ í™”í ì œë„'ê°€ ì–¸ê¸‰ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },

            // --- ê¸°íƒ€ (1ë¬¸ì œ) ---
            {
                q: "êµ­ì™•ì—ê²Œ ê¶Œë ¥ì„ ìœ„ì„ë°›ì€ íŠ¹ì •ì¸ê³¼ ì™¸ì²™ ê°€ë¬¸ì´ ê¶Œë ¥ì„ ë…ì í•œ ì •ì¹˜ í˜•íƒœëŠ”?",
                a: ["ì„¸ë„ ì •ì¹˜", "ë¶•ë‹¹ ì •ì¹˜", "ì™•ë„ ì •ì¹˜", "íŒ¨ë„ ì •ì¹˜"],
                correct: 0,
                desc: "ìë£Œ í•˜ë‹¨ì— 'ì„¸ë„ ì •ì¹˜'ì— ëŒ€í•œ ì •ì˜ê°€ ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤."
            }
        ];

        let questions = []; 

        const game = {
            currentIdx: 0,
            score: 0,
            isAnswering: false,

            start: function() {
                this.currentIdx = 0;
                this.score = 0;
                
                // ë¬¸ì œ ì„ê¸° (ëœë¤)
                questions = [...questionsSource];
                for (let i = questions.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [questions[i], questions[j]] = [questions[j], questions[i]];
                }

                document.getElementById('q-total').innerText = questions.length;
                document.getElementById('start-screen').classList.add('hidden');
                document.getElementById('quiz-screen').classList.remove('hidden');
                document.getElementById('result-screen').classList.add('hidden');
                document.getElementById('progress-container').classList.remove('hidden');
                this.renderQuestion();
            },

            renderQuestion: function() {
                this.isAnswering = true;
                const q = questions[this.currentIdx];
                
                document.getElementById('q-current').innerText = this.currentIdx + 1;
                document.getElementById('score-badge').innerText = this.score + "ì ";
                document.getElementById('question-text').innerText = q.q;
                
                const percent = ((this.currentIdx) / questions.length) * 100;
                document.getElementById('progress-bar').style.width = percent + "%";

                const optionsArea = document.getElementById('options-area');
                optionsArea.innerHTML = '';
                
                document.getElementById('feedback-area').classList.add('hidden');
                document.getElementById('ai-response-area').classList.add('hidden');
                document.getElementById('ai-btn').classList.remove('hidden');
                document.getElementById('ai-btn').innerHTML = '<i class="fas fa-robot"></i> AI ì„ ìƒë‹˜ê»˜ ìì„¸í•œ í•´ì„¤ ë“£ê¸°';
                document.getElementById('ai-btn').disabled = false;

                // ë³´ê¸° ì„ê¸°
                let options = q.a.map((text, idx) => ({ text, isCorrect: idx === q.correct }));
                for (let i = options.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [options[i], options[j]] = [options[j], options[i]];
                }

                options.forEach((opt) => {
                    const btn = document.createElement('button');
                    btn.className = "w-full text-left p-4 rounded-xl border-2 border-orange-100 hover:border-orange-400 hover:bg-orange-50 transition duration-200 font-medium text-gray-700 active:scale-95 text-xl";
                    btn.innerText = opt.text;
                    btn.onclick = () => this.checkAnswer(opt.isCorrect, btn, options, q.desc);
                    optionsArea.appendChild(btn);
                });
            },

            checkAnswer: function(isCorrect, btnClicked, options, desc) {
                if(!this.isAnswering) return;
                this.isAnswering = false;

                const buttons = document.getElementById('options-area').children;

                if(isCorrect) {
                    this.score += 4; // 25ë¬¸ì œ * 4ì  = 100ì 
                    btnClicked.classList.add('bg-orange-100', 'border-orange-500', 'text-orange-900');
                    this.showFeedback(true, desc);
                } else {
                    btnClicked.classList.add('bg-red-100', 'border-red-500', 'text-red-900');
                    // ì •ë‹µ í‘œì‹œ
                    for(let i=0; i<options.length; i++) {
                        if(options[i].isCorrect) {
                            buttons[i].classList.add('bg-orange-100', 'border-orange-500', 'text-orange-900');
                        }
                    }
                    this.showFeedback(false, desc);
                }
                
                document.getElementById('score-badge').innerText = this.score + "ì ";
            },

            showFeedback: function(isCorrect, desc) {
                const fbArea = document.getElementById('feedback-area');
                const icon = document.getElementById('feedback-icon');
                const result = document.getElementById('feedback-result');
                const detail = document.getElementById('feedback-detail');

                fbArea.classList.remove('hidden');
                
                if(isCorrect) {
                    icon.innerHTML = '<i class="fas fa-check-circle text-orange-500 correct-anim"></i>';
                    result.innerText = "ì •ë‹µì…ë‹ˆë‹¤!";
                    result.className = "text-xl text-orange-600";
                } else {
                    icon.innerHTML = '<i class="fas fa-times-circle text-red-500 wrong-anim"></i>';
                    result.innerText = "ì•„ì‰½ë„¤ìš”!";
                    result.className = "text-xl text-red-600";
                }
                detail.innerText = desc;
            },

            askAI: async function() {
                const q = questions[this.currentIdx];
                const btn = document.getElementById('ai-btn');
                const output = document.getElementById('ai-response-area');
                
                btn.innerHTML = '<span class="loader mr-2"></span> ì„ ìƒë‹˜ì´ ìƒê° ì¤‘ì´ì—ìš”...';
                btn.disabled = true;

                try {
                    // ì •ë‹µ í…ìŠ¤íŠ¸ ì°¾ê¸°
                    const correctText = q.a[q.correct];

                    const prompt = `
                        ë„ˆëŠ” ì¹œì ˆí•˜ê³  í•´ë°•í•œ í•œêµ­ì‚¬ ì„ ìƒë‹˜ì´ì•¼.
                        ì´ˆë“±í•™êµ~ì¤‘í•™êµ ìˆ˜ì¤€ì˜ í•™ìƒì—ê²Œ ì•„ë˜ ì—­ì‚¬ ë¬¸ì œì— ëŒ€í•´ ì‰½ê³  ì¬ë¯¸ìˆê²Œ ì„¤ëª…í•´ì¤˜.
                        
                        [ë¬¸ì œ] ${q.q}
                        [ì •ë‹µ] ${correctText}
                        [í•µì‹¬ ì„¤ëª…] ${q.desc}
                        
                        ìš”ì²­ì‚¬í•­:
                        1. ì •ë‹µì´ ì™œ ì •ë‹µì¸ì§€ ë°°ê²½ ì´ì•¼ê¸°ë¥¼ í¬í•¨í•´ì„œ ì„¤ëª…í•´ì¤˜.
                        2. ì¤‘ìš”í•œ ì—­ì‚¬ì  ì˜ì˜ë¥¼ í•œ ì¤„ ìš”ì•½í•´ì¤˜.
                        3. ë§íˆ¬ëŠ” ì¹œì ˆí•˜ê²Œ "í•´ìš”"ì²´ë¥¼ ì¨ì¤˜.
                        4. ë„ˆë¬´ ê¸¸ì§€ ì•Šê²Œ 300ì ë‚´ì™¸ë¡œ í•µì‹¬ë§Œ ìš”ì•½í•´ì¤˜.
                    `;

                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                    });

                    if (!response.ok) throw new Error('API í˜¸ì¶œ ì‹¤íŒ¨');

                    const data = await response.json();
                    const text = data.candidates[0].content.parts[0].text;
                    const formattedText = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br>');

                    output.innerHTML = formattedText;
                    output.classList.remove('hidden');
                    btn.classList.add('hidden');

                } catch (error) {
                    console.error(error);
                    btn.innerHTML = '<i class="fas fa-exclamation-circle"></i> ì„ ìƒë‹˜ì´ ë°”ë¹ ìš”. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
                    btn.disabled = false;
                }
            },

            nextQuestion: function() {
                this.currentIdx++;
                if(this.currentIdx < questions.length) {
                    this.renderQuestion();
                } else {
                    this.finishGame();
                }
            },

            finishGame: function() {
                document.getElementById('quiz-screen').classList.add('hidden');
                document.getElementById('feedback-area').classList.add('hidden');
                document.getElementById('progress-container').classList.add('hidden');
                document.getElementById('result-screen').classList.remove('hidden');

                document.getElementById('final-score').innerText = this.score;
                // ë§Œì  100ì  ê¸°ì¤€ í¼ì„¼íŠ¸ ê³„ì‚° (ì ìˆ˜ ìì²´ê°€ ì´ë¯¸ 100ì  ë§Œì ì´ë¯€ë¡œ scoreì™€ ë™ì¼)
                const percent = this.score; 
                document.getElementById('final-percent').innerText = percent + "%";
                document.getElementById('result-bar').style.width = percent + "%";

                let msg = "";
                if(this.score >= 80) {
                    msg = "ì°¸ ì˜í–ˆì–´ìš”! ì™„ë²½í•˜ê²Œ ì´í•´í•˜ê³  ê³„ì‹œë„¤ìš”. ğŸ†";
                } else if(this.score >= 50) {
                    msg = "ë³´í†µì´ì—ìš”. ì¡°ê¸ˆë§Œ ë” ë…¸ë ¥í•˜ë©´ ì™„ë²½í•´ì§ˆ ê±°ì˜ˆìš”. ğŸ‘";
                } else {
                    msg = "ì•„ì‰¬ì›Œìš”. ë‹¤ì‹œ ìˆ˜ì—…ì„ ë“¤ì–´ì•¼ í•  ê²ƒ ê°™ì•„ìš”. ğŸ“š";
                }
                
                document.getElementById('result-msg').innerText = msg;
            },
            
            restart: function() { this.start(); }
        };
    </script>
</body>
</html>