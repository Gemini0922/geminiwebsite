<!DOCTYPE html>
<html lang="ko">
<head>
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬íšŒ ë°œí‘œ ë³µìŠµ</title>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-N1YW1EHE33"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-N1YW1EHE33');
</script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Jua í°íŠ¸ ì„í¬íŠ¸ */
        @import url('https://fonts.googleapis.com/css2?family=Gamja+Flower&display=swap');

        body {
            /* ëª¨ë“  í°íŠ¸ë¥¼ Gamja Flowerë¡œ ë³€ê²½ */
            font-family: 'Gamja Flower', sans-serif;
            background-color: #fff7ed; /* Orange-50 */
        }
        <audio id="bgm" loop>
            <source src="Plum - Timeline.mp3" type="audio/mp3">
        </audio>

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .correct-anim { animation: bounce 0.5s; }
        .wrong-anim { animation: shake 0.5s; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .loader {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #f97316;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* AI ì„¤ëª… ì˜ì—­ ìŠ¤íƒ€ì¼ */
        .ai-content strong { font-weight: 200; color: #c2410c; }
        .ai-content ul { list-style-type: disc; margin-left: 1.5rem; margin-top: 0.5rem; }
        .ai-content li { margin-bottom: 0.25rem; }
    </style>
</head>
<body class="bg-orange-50 min-h-screen flex items-center justify-center p-4">

    <div class="max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden relative" style="min-height: 750px;">
        
        <!-- í—¤ë” -->
        <div class="bg-orange-600 p-4 text-white text-center absolute top-0 left-0 right-0 z-20 shadow-md h-[120px] flex flex-col justify-center">
            <h1 class="text-3xl font-bold mb-1">ì‚¬íšŒ 5ëª¨ë‘  ë°œí‘œ ë³µìŠµ</h1>
            <p class="text-xl opacity-90">ë°œí‘œ ë‚´ìš© ë³µìŠµ (41ë¬¸ì œ)</p>
        </div>

        <div id="progress-container" class="hidden w-full bg-gray-200 h-2 absolute top-[120px] z-20">
            <div id="progress-bar" class="bg-orange-400 h-2 transition-all duration-300" style="width: 0%"></div>
        </div>

        <div id="start-screen" class="absolute inset-0 flex flex-col items-center justify-center p-6 bg-white z-10 fade-in" style="padding-top: 130px;">
            <!-- ì´ë¯¸ì§€ ì ìš© -->
            <div class="mb-8">
                <img src="ì‚¬íšŒì±….jpg" 
                     alt="ì¡°ì„  ê°œí˜ ìºë¦­í„°" 
                     class="w-56 h-56 object-contain mx-auto drop-shadow-xl transform hover:scale-105 transition duration-300"
                     onerror="this.style.display='none'; document.getElementById('fallback-icon').style.display='block';">
                <div id="fallback-icon" class="text-8xl text-orange-500 transform rotate-12 hidden">
                    <i class="fas fa-book-reader"></i>
                </div>
            </div>

            <h2 class="text-4xl font-bold mb-4 text-gray-800 text-center">ì—­ì‚¬ ë§ˆìŠ¤í„° ë„ì „!</h2>
            <p class="text-xl text-gray-600 mb-12 text-center">ì´ 41ë¬¸ì œë¡œ ë°œí‘œ ë‚´ìš©ì„<br>ì™„ë²½í•˜ê²Œ ë³µìŠµí•´ë´ìš”.</p>
            
            <button onclick="game.start()" class="w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-4 rounded-xl shadow-lg transition transform hover:scale-105 text-2xl">
                QUIZ START!
            </button>
        </div>

        <!-- í€´ì¦ˆ í™”ë©´ -->
        <div id="quiz-screen" class="hidden absolute inset-0 flex flex-col p-6 overflow-y-auto bg-white z-0" style="padding-top: 150px; padding-bottom: 120px;">
            <div class="mb-4 flex items-center justify-between">
                <span class="px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-lg shadow-sm">
                    Q<span id="q-current">1</span> / <span id="q-total">40</span>
                </span>
                <span id="score-badge" class="text-orange-600 text-lg bg-orange-50 px-2 py-1 rounded">0ì </span>
            </div>

            <h3 id="question-text" class="text-2xl text-gray-800 mb-8 leading-snug break-keep">
                ë¬¸ì œ ë¡œë”© ì¤‘...
            </h3>

            <div id="options-area" class="flex flex-col gap-3">
                <!-- Buttons injected here -->
            </div>
        </div>

        <!-- í”¼ë“œë°± ë° AI ì˜ì—­ -->
        <div id="feedback-area" class="hidden absolute bottom-0 left-0 right-0 bg-white border-t-2 border-orange-100 p-5 rounded-t-2xl shadow-[0_-5px_20px_rgba(0,0,0,0.1)] z-30 fade-in max-h-[80vh] overflow-y-auto flex flex-col">
            
            <div class="flex gap-4 mb-4">
                <div id="feedback-icon" class="text-4xl shrink-0 pt-1"></div>
                <div class="flex-1">
                    <p id="feedback-result" class="text-2xl mb-1"></p>
                    <p id="feedback-detail" class="text-lg text-gray-600 mb-1 leading-relaxed"></p>
                </div>
            </div>

            <div class="border-t border-gray-100 pt-3 mb-3">
                <button id="ai-btn" onclick="game.askAI()" class="w-full bg-indigo-50 text-indigo-700 py-3 rounded-xl hover:bg-indigo-100 transition border border-indigo-200 flex items-center justify-center gap-2 mb-3 text-lg">
                    <i class="fas fa-robot"></i> AI ì„ ìƒë‹˜ê»˜ ìì„¸í•œ í•´ì„¤ ë“£ê¸°
                </button>
                
                <div id="ai-response-area" class="hidden bg-gray-50 p-4 rounded-xl border border-gray-200 text-lg text-gray-700 leading-relaxed ai-content mb-3">
                    <!-- AI Content goes here -->
                </div>
            </div>

            <button onclick="game.nextQuestion()" class="w-full bg-orange-600 text-white py-3 rounded-xl hover:bg-orange-700 transition shadow-md sticky bottom-0 text-xl">
                ë‹¤ìŒ ë¬¸ì œ <i class="fas fa-arrow-right ml-1"></i>
            </button>
        </div>

        <!-- ê²°ê³¼ í™”ë©´ -->
        <div id="result-screen" class="hidden absolute inset-0 flex flex-col items-center justify-center p-6 bg-white z-10" style="padding-top: 120px;">
            <h2 class="text-4xl text-gray-800 mb-2">ìµœì¢… ê²°ê³¼</h2>
            <div class="text-7xl text-orange-600 mb-4">
                <span id="final-score">0</span>ì 
            </div>
            <p id="result-msg" class="text-gray-600 mb-8 text-center text-2xl leading-relaxed"></p>
            
            <div class="w-full bg-gray-50 p-6 rounded-xl mb-6 border border-gray-100">
                <div class="flex justify-between mb-2 text-lg text-gray-500">
                    <span>ì •ë‹µë¥ </span>
                    <span id="final-percent">0%</span>
                </div>
                <div class="w-full bg-gray-200 h-3 rounded-full overflow-hidden">
                    <div id="result-bar" class="bg-orange-500 h-full" style="width: 0%"></div>
                </div>
            </div>

            <button onclick="game.restart()" class="w-full bg-white border-2 border-orange-600 text-orange-600 py-3 rounded-xl hover:bg-orange-50 transition text-2xl">
                <i class="fas fa-redo mr-2"></i>ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
            </button>
        </div>
    </div>

    <script>
        const apiKey = ""; // API Key injected by environment

        // PDF ìë£Œ í…ìŠ¤íŠ¸ì— ê¸°ë°˜í•œ 40ë¬¸ì œ
        const questionsSource = [
            // [ê°‘ì‹ ì •ë³€ - ê¸°ë³¸]
            {
                q: "ê°‘ì‹ ì •ë³€ì€ 1884ë…„ ê¸‰ì§„ ê°œí™”íŒŒê°€ ì–´ëŠ ë‚˜ë¼ì˜ ì§€ì›ì„ ë°›ì•„ ì¼ìœ¼ì¼°ë‚˜ìš”?",
                a: ["ì¼ë³¸", "ì²­ë‚˜ë¼", "ë¯¸êµ­", "ëŸ¬ì‹œì•„"],
                correct: 0,
                desc: "ìë£Œì— '1884ë…„ ê¸‰ì§„ ê°œí™”íŒŒëŠ” ì¼ë³¸ì˜ ì§€ì›ì„ ë°›ì•„ ì •ë³€ì„ ì¼ìœ¼ì¼°ë‹¤'ê³  ëª…ì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ê°‘ì‹ ì •ë³€ì„ ì¼ìœ¼í‚¨ ê¸‰ì§„ ê°œí™”íŒŒê°€ ëª¨ë¸ë¡œ ì‚¼ì€ ê°œí˜ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                a: ["ì¼ë³¸ ë©”ì´ì§€ ìœ ì‹ ", "ì²­ë‚˜ë¼ ì–‘ë¬´ ìš´ë™", "í”„ë‘ìŠ¤ í˜ëª…", "ë¯¸êµ­ ë…ë¦½ í˜ëª…"],
                correct: 0,
                desc: "ìë£Œì— 'ì¼ë³¸ ë©”ì´ì§€ ìœ ì‹ ì„ ë³¸ë–  ìì£¼ì  ê·¼ëŒ€ êµ­ê°€ë¥¼ ê±´ì„¤í•˜ê³ ì í•˜ì˜€ë‹¤'ê³  ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ê°‘ì‹ ì •ë³€ ë‹¹ì‹œ ê¸‰ì§„ ê°œí™”íŒŒê°€ í­íƒ„ì„ í„°ëœ¨ë ¤ í˜¼ë€ì„ ì¼ìœ¼í‚¨ ì¥ì†ŒëŠ”?",
                a: ["ìš°ì •êµ­ (ìš°ì •ì´êµ­)", "ê²½ë³µê¶", "ì°½ë•ê¶", "í†µë¦¬ê¸°ë¬´ì•„ë¬¸"],
                correct: 0,
                desc: "ìë£Œì— '1884ë…„ 12ì›” 4ì¼ ìš°ì •êµ­ì—ì„œ í™ì˜ì‹ì´ í­íƒ„ì„ í„°ëœ¨ë ¤'ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ê°‘ì‹ ì •ë³€ì˜ í•µì‹¬ ë‚´ìš© ì¤‘ ì²­ë‚˜ë¼ì™€ì˜ ê´€ê³„ì— ëŒ€í•œ ì£¼ì¥ì€?",
                a: ["ì²­ê³¼ì˜ ì¢…ì† ê´€ê³„ë¥¼ ëŠìŒ", "ì²­ê³¼ì˜ ê´€ê³„ë¥¼ ê°•í™”í•¨", "ì²­ì— ì¡°ê³µì„ ëŠ˜ë¦¼", "ì²­ì˜ êµ°ëŒ€ë¥¼ ì£¼ë‘”ì‹œí‚´"],
                correct: 0,
                desc: "ìë£Œì— 'ê°œí™”íŒŒëŠ” ì²­ê³¼ì˜ ì¢…ì† ê´€ê³„ë¥¼ ëŠê³ ...'ë¼ê³  ëª…ì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ê°‘ì‹ ì •ë³€ì˜ ê°œí˜ ë‚´ìš© ì¤‘ ì‚¬íšŒì  í‰ë“±ê³¼ ê´€ë ¨ëœ ê²ƒì€?",
                a: ["ì‹ ë¶„ì œ íì§€", "ê³¼ê±°ì œ ë¶€í™œ", "í˜¸í¬ì œ ì‹¤ì‹œ", "ë‹¨ë°œë ¹ ì‹œí–‰"],
                correct: 0,
                desc: "ìë£Œì— 'ì‹ ë¶„ì œë¥¼ íì§€í•˜ë©° ì¸ë¯¼ í‰ë“±ì„ ì‹¤í˜„í•˜ê³ 'ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ê°‘ì‹ ì •ë³€ ì‹¤íŒ¨ì˜ ì›ì¸ìœ¼ë¡œ ìë£Œì— ì–¸ê¸‰ëœ ê²ƒì€?",
                a: ["ë¯¼ì¤‘ì˜ ì§€ì§€ ë¶€ì¡±", "ì¼ë³¸ì˜ ë°©í•´", "ë¯¸êµ­ì˜ ê°œì…", "ìê¸ˆ ë¶€ì¡±"],
                correct: 0,
                desc: "ìë£Œ í•˜ë‹¨ ì‹¤íŒ¨ ì›ì¸ì— '1. ê°‘ì‹ ì •ë³€ì€ ë¯¼ì¤‘ì˜ ì§€ì§€ë¥¼ ì–»ì§€ ëª»í•¨'ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ê°‘ì‹ ì •ë³€ ë‹¹ì‹œ ê°œí™”íŒŒê°€ ë°œí‘œí•œ ê°œí˜ ë°©ì•ˆì˜ ì´ë¦„ì€?",
                a: ["14ê°œì¡° ê°œí˜ ë°©ì•ˆ", "í™ë²” 14ì¡°", "í—Œì˜ 6ì¡°", "íì • ê°œí˜ì•ˆ"],
                correct: 0,
                desc: "ìë£Œì— '14ê°œì¡°ì˜ ê°œí˜ë°©ì•ˆì„ ë°œí‘œí•˜ì˜€ë‹¤'ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ê°‘ì‹ ì •ë³€ì„ ì¼ìœ¼í‚¨ ì£¼ìš” ì¸ë¬¼ë¡œ ìë£Œì— ì–¸ê¸‰ëœ ì‚¬ëŒì€?",
                a: ["ê¹€ì˜¥ê· ", "ì „ë´‰ì¤€", "í¥ì„ ëŒ€ì›êµ°", "ìµœìµí˜„"],
                correct: 0,
                desc: "ìë£Œì— ë°•ì˜íš¨, ì„œì¬í•„, ì„œê´‘ë²”, ê¹€ì˜¥ê·  ë“±ì´ ì–¸ê¸‰ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ê°‘ì‹ ì •ë³€ì€ ë©°ì¹  ê°„ ì§€ì†ë˜ì—ˆë‚˜ìš”?",
                a: ["3ì¼", "5ì¼", "7ì¼", "10ì¼"],
                correct: 0,
                desc: "ìë£Œ ì œëª©ì— '3ì¼ì²œí•˜ë¡œ ëë‚œ ê°‘ì‹ ì •ë³€'ì´ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },

            // [ê°‘ì‹ ì •ë³€ - ì‹¬í™”/ì„¸ë¶€]
            {
                q: "ê°‘ì‹ ì •ë³€ì´ ì¼ì–´ë‚œ í•´ëŠ” ì–¸ì œì¸ê°€ìš”?",
                a: ["1884ë…„", "1894ë…„", "1876ë…„", "1910ë…„"],
                correct: 0,
                desc: "ìë£Œ ì²« ì¤„ì— 'ê°‘ì‹ ì •ë³€ì€ 1884ë…„ 12ì›” 4ì¼'ì´ë¼ê³  ëª…ì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ê°‘ì‹ ì •ë³€ ë‹¹ì‹œ ìš°ì •êµ­ì—ì„œ í­íƒ„ì„ ì§ì ‘ í„°ëœ¨ë¦° ì¸ë¬¼ì€ ëˆ„êµ¬ì¸ê°€ìš”?",
                a: ["í™ì˜ì‹", "ê¹€ì˜¥ê· ", "ë°•ì˜íš¨", "ì„œì¬í•„"],
                correct: 0,
                desc: "ìë£Œì— 'ìš°ì •êµ­ì—ì„œ í™ì˜ì‹ì´ í­íƒ„ì„ í„°ëœ¨ë ¤ í˜¼ë€ì„ ì¼ìœ¼í‚¤ì'ë¼ê³  ì„œìˆ ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ê°‘ì‹ ì •ë³€ ë‹¹ì‹œ ê°œí™”íŒŒê°€ ë™ì›í•œ êµ°ì‚¬ ì„¸ë ¥ì€?",
                a: ["ì¼ë³¸ í˜¸ìœ„ë³‘ê³¼ ë³„ê¸°êµ°", "ì²­ë‚˜ë¼ êµ°ëŒ€", "ë™í•™ ë†ë¯¼êµ°", "ì‹ ì‹ êµ°ëŒ€ ì „ì²´"],
                correct: 0,
                desc: "ìë£Œì— 'ì¼ë³¸ í˜¸ìœ„ë³‘ê³¼ ë³„ê¸°êµ°ì„ ë™ì›í•˜ì—¬'ë¼ê³  ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ê°‘ì‹ ì •ë³€ ë•Œ ê°œí™”íŒŒê°€ ê³ ì¢…ê³¼ ì™•ì„¸ìë¥¼ ì–´ë””ë¡œ ì˜®ê²¼ë‚˜ìš”?",
                a: ["ì°½ë•ê¶", "ê²½ë³µê¶", "ë•ìˆ˜ê¶", "ê²½í¬ê¶"],
                correct: 0,
                desc: "ìë£Œì— 'ê³ ì¢…ê³¼ ì™•ì„¸ìë¥¼ ì°½ë•ê¶ìœ¼ë¡œ ì˜®ê²¨ ê°ê¸ˆí•˜ê³ 'ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ê°‘ì‹ ì •ë³€ ê°œí˜ì•ˆ ì¤‘ 'ì¸ê¶Œ'ê³¼ ê´€ë ¨ëœ ë‚´ìš©ì€?",
                a: ["ì—°ì¢Œì œì™€ ê³ ë¬¸ íì§€", "ì–¸ë¡ ì˜ ììœ  ë³´ì¥", "ì§‘íšŒì˜ ììœ  ë³´ì¥", "ì¢…êµì˜ ììœ "],
                correct: 0,
                desc: "ìë£Œì— 'ì—°ì¢Œì œì™€ ê³ ë¬¸ì„ íì§€í•˜ë©°'ë¼ëŠ” ë‚´ìš©ì´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ê°‘ì‹ ì •ë³€ì„ ì£¼ë„í•œ ì„¸ë ¥ì´ íƒ€ë„í•˜ê³ ì í–ˆë˜ ëŒ€ìƒì€?",
                a: ["ë¯¼ì”¨ ì²™ì¡± ì„¸ë„", "í¥ì„ ëŒ€ì›êµ°", "ì¼ë³¸ ì„¸ë ¥", "ë™í•™ ë†ë¯¼êµ°"],
                correct: 0,
                desc: "ìë£Œì— 'ë¯¼ì”¨ ì²™ì¡± ì„¸ë„ë¥¼ íƒ€ë„í•˜ê³ 'ë¼ê³  ëª©ì ì´ ëª…ì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },

            // [ë™í•™ ë†ë¯¼ ìš´ë™ - ê¸°ì¡´ ìœ ì§€]
            {
                q: "ë™í•™ ë†ë¯¼ ìš´ë™ì˜ ë°°ê²½ìœ¼ë¡œ ìë£Œì— ë‚˜ì˜¨ ë‚´ìš©ì€?",
                a: ["ë†ë¯¼ë“¤ ì‚¬ì´ì— ë™í•™ì´ ë„ë¦¬ í¼ì§", "ì„œì–‘ ë¬¸ë¬¼ì˜ í™•ì‚°", "ì¼ë³¸ì˜ ì¹¨ëµ ì‹¬í™”", "ì‹ ë¶„ì œì˜ ë™ìš”"],
                correct: 0,
                desc: "ìë£Œì— 'ë°°ê²½: ë†ë¯¼ë“¤ ì‚¬ì´ì— ë™í•™ì´ ë„ë¦¬ í¼ì§'ì´ë¼ê³  ì í˜€ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ìë£Œì—ì„œ ì„¤ëª…í•˜ëŠ” ë™í•™ ë†ë¯¼ ìš´ë™ì˜ ì˜ì˜ëŠ”?",
                a: ["ê·¼ëŒ€ì  êµ­ê°€ì˜ ë°œíŒì´ ë¨", "ì™•ê¶Œì„ ê°•í™”í•¨", "ì™¸ì„¸ë¥¼ ë¬¼ë¦¬ì¹¨", "ì„±ë¦¬í•™ì  ì§ˆì„œ íšŒë³µ"],
                correct: 0,
                desc: "ìë£Œì— 'ê·¼ëŒ€ êµ­ê°€ë¡œì˜ ì „í™˜ : ê·¼ëŒ€ì  êµ­ê°€ì˜ ë°œíŒì´ ë¨'ì´ë¼ê³  ëª…ì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },

            // [1ì°¨ ê°‘ì˜¤ê°œí˜ - ê¸°ë³¸]
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ ì •ì¹˜ ë¶„ì•¼ì—ì„œ ì‹ ë¶„ì— ìƒê´€ì—†ì´ ê´€ë¦¬ë¥¼ ì„ ë°œí•˜ê¸° ìœ„í•´ íì§€í•œ ê²ƒì€?",
                a: ["ê³¼ê±°ì œ", "ìŒì„œì œ", "ì²œê±°ì œ", "ê³µìŒì „"],
                correct: 0,
                desc: "ìë£Œì— 'ê³¼ê±°ì œ íì§€ : ì‹ ë¶„ì— ìƒê´€ ì—†ì´ ê´€ë¦¬ë¥¼ ì„ ë°œ í•˜ë ¤ëŠ” ì‹œì‘'ì´ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ ë‹¹ì‹œ ê¸°ëŠ¥ì„ ì¶•ì†Œí•˜ì—¬ ë‚´ê° ì²´ì œë¥¼ ê°•í™”í•˜ë ¤ í–ˆë˜ ê¸°êµ¬ëŠ”?",
                a: ["ì‚¼ì‚¬", "ì˜ì •ë¶€", "6ì¡°", "ìŠ¹ì •ì›"],
                correct: 0,
                desc: "ìë£Œì— 'ì‚¼ì‚¬ì˜ ê¸°ëŠ¥ ì¶•ì†Œ : ì¡°ì„ ì˜ ì¤‘ì•™ ì§‘ê¶Œì  ë‚´ê° ì²´ì œ ê°•í™”'ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ì—ì„œ ì™•ê¶Œì„ ì•½í™”ì‹œí‚¤ê¸° ìœ„í•´ ê°•í™”í•œ ì²´ì œëŠ”?",
                a: ["ì˜ì •ë¶€ ì¤‘ì‹¬ ì²´ì œ", "ë¹„ë³€ì‚¬ ì¤‘ì‹¬ ì²´ì œ", "6ì¡° ì§ê³„ì œ", "ì™•ê¶Œ ì¤‘ì‹¬ ì²´ì œ"],
                correct: 0,
                desc: "ìë£Œì— 'ì˜ì •ë¶€ ì¤‘ì‹¬ ì²´ì œ ê°•í™” : ì™•ê¶Œì„ ì•½í™”ì‹œí‚´'ì´ë¼ê³  ëª…ì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ ê²½ì œ ë¶„ì•¼ì—ì„œ ì„¸ê¸ˆ ì œë„ë¥¼ ì–´ë–»ê²Œ ê°œí¸í–ˆë‚˜ìš”?",
                a: ["ì¡°ì„¸ì˜ ê¸ˆë‚©í™” (í™”í ë‚©ë¶€)", "ìŒ€ë¡œ ë‚©ë¶€", "ì˜·ê°ìœ¼ë¡œ ë‚©ë¶€", "íŠ¹ì‚°ë¬¼ ë‚©ë¶€"],
                correct: 0,
                desc: "ìë£Œì— 'ì¡°ì„¸ ì œë„ì˜ ê°œí¸ : ê¸°ì¡´ì˜ ì„¸ê¸ˆ ì œë„ë¥¼ ê¸‰ë‚©í™”(ê¸ˆë‚©í™”)í•˜ì—¬ í™”íë¡œ ë‚©ë¶€'ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ì—ì„œ ê²½ì œì  íš¨ìœ¨ì„±ì„ ë†’ì´ê¸° ìœ„í•´ í†µì¼í•œ ê²ƒì€?",
                a: ["ë„ëŸ‰í˜•", "í™”í ëª¨ì–‘", "ìˆ˜ë ˆ ë„ˆë¹„", "ë„ë¡œ í­"],
                correct: 0,
                desc: "ìë£Œì— 'ë„ëŸ‰í˜• í†µì¼ : ë„ëŸ‰ì„ í†µì¼í•´ì„œ íš¨ìœ¨ì„±ê³¼ ê²½ì œì„±ì„ ë†’ì„'ì´ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ ì‚¬íšŒ ë¶„ì•¼ì—ì„œ í‰ë“±í•œ ì‚¬íšŒì˜ í† ëŒ€ë¥¼ ìœ„í•´ íì§€í•œ ê²ƒì€?",
                a: ["ì‹ ë¶„ì œ", "í˜¸íŒ¨ë²•", "ê³¼ê±°ì œ", "êµ°ì—­"],
                correct: 0,
                desc: "ìë£Œì— 'ì‹ ë¶„ì œ íì§€ : ì°¨ë³„ì´ ì—†ê²Œ í•˜ì—¬ í‰ë“±í•œ ì‚¬íšŒì˜ í† ëŒ€'ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ ì‚¬íšŒ ë¶„ì•¼ì—ì„œ ì—¬ì„±ì˜ ê¶Œë¦¬ ë³´ì¥ì„ ìœ„í•´ ê¸ˆì§€í•œ ê²ƒì€?",
                a: ["ì¡°í˜¼ (ì¼ì° ê²°í˜¼)", "ì´í˜¼", "ì¬í˜¼", "ìƒì†"],
                correct: 0,
                desc: "ìë£Œì— 'ì¡°í˜¼ ê¸ˆì§€ : ì–´ë¦°ì´ì™€ ì—¬ì„±ì˜ ê¶Œë¦¬ ë³´ì¥'ì´ë¼ê³  ëª…ì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ êµ°ì‚¬ ë¶„ì•¼ì˜ ê°œí˜ ë‚´ìš©ì€?",
                a: ["êµ°ì‚¬ ì¡°ì§ ì¬í¸ì„±", "ë³„ê¸°êµ° ì°½ì„¤", "í•´êµ° ì°½ì„¤", "ì§•ë³‘ì œ ì‹¤ì‹œ"],
                correct: 0,
                desc: "ìë£Œì— 'êµ°ì‚¬ ì¡°ì§ ì¬í¸ì„± : ê·¼ëŒ€ì  êµ°ì‚¬ ë„ì…ì˜ ì´ˆì„ ë§ˆë ¨'ì´ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },

            // [1ì°¨ ê°‘ì˜¤ê°œí˜ - ì‹¬í™”/ì„¸ë¶€]
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ì—ì„œ 'ì‚¼ì‚¬'ì˜ ê¸°ëŠ¥ì„ ì¶•ì†Œí•œ ê¶ê·¹ì ì¸ ëª©ì ì€?",
                a: ["ë‚´ê° ì²´ì œ ê°•í™”", "ì™•ê¶Œ ê°•í™”", "ì–¸ë¡  í™œë™ ë³´ì¥", "ë¶€ì •ë¶€íŒ¨ ë°©ì§€"],
                correct: 0,
                desc: "ìë£Œì— 'ì¡°ì„ ì˜ ì¤‘ì•™ ì§‘ê¶Œì  ë‚´ê° ì²´ì œ ê°•í™”'ë¥¼ ìœ„í•´ ì‚¼ì‚¬ì˜ ê¸°ëŠ¥ì„ ì¶•ì†Œí–ˆë‹¤ê³  ë‚˜ì˜µë‹ˆë‹¤."
            },
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ ìƒì—… ë¶„ì•¼ì˜ ê°œí˜ ë‚´ìš©ì€?",
                a: ["ìƒì—… ììœ í™” ë° ìƒê³µì—… ì§„í¥", "êµ­ê°€ ì „ë§¤ ì‚¬ì—… í™•ëŒ€", "ì™¸êµ­ ìƒì¸ ì¶œì… ê¸ˆì§€", "ì‹œì¥ ì„¸ê¸ˆ ì¸ìƒ"],
                correct: 0,
                desc: "ìë£Œ ê²½ì œì  ê°œí˜ í•­ëª©ì— 'ìƒì—… ììœ í™” : ìƒì—…ì— ëŒ€í•œ ì œí•œ ì™„í™”, ìƒê³µì—… ì§„í¥'ì´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ì—ì„œ ë…¸ë¹„ì œë¥¼ íì§€í•œ ê²°ê³¼ë¡œ ê¸°ëŒ€í•œ íš¨ê³¼ëŠ”?",
                a: ["ë†ë¯¼ê³¼ í•˜ì¸µë¯¼ì˜ ì‚¶ì˜ ì§ˆ í–¥ìƒ", "ì–‘ë°˜ì˜ ê¶Œìœ„ ìƒìŠ¹", "êµ­ê°€ ì¬ì • ê°ì†Œ", "êµ°ì‚¬ë ¥ ì•½í™”"],
                correct: 0,
                desc: "ìë£Œì— 'ë…¸ë¹„ì œ íì§€ : ë†ë¯¼ê³¼ í•˜ì¸µë¯¼ì˜ ì‚¶ì˜ ì§ˆ í–¥ìƒ'ì´ë¼ê³  ì„¤ëª…ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "1ì°¨ ê°‘ì˜¤ê°œí˜ì—ì„œ 'ì˜ì •ë¶€ ì¤‘ì‹¬ ì²´ì œ ê°•í™”'ê°€ ê°€ì ¸ì˜¨ ì •ì¹˜ì  ê²°ê³¼ëŠ”?",
                a: ["ì™•ê¶Œ ì•½í™”", "ì™•ê¶Œ ê°•í™”", "ì™¸ì²™ ì„¸ë ¥ ê°•í™”", "ì§€ë°©ê´€ ê¶Œí•œ ê°•í™”"],
                correct: 0,
                desc: "ìë£Œì— 'ì˜ì •ë¶€ ì¤‘ì‹¬ ì²´ì œ ê°•í™” : ì™•ê¶Œì„ ì•½í™”ì‹œí‚´'ì´ë¼ê³  ëª…í™•íˆ ê¸°ìˆ ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },

            // [ì„¸ë„ ì •ì¹˜]
            {
                q: "ìë£Œì— ë‚˜ì˜¨ 'ì„¸ë„ ì •ì¹˜'ì˜ ì •ì˜ëŠ”?",
                a: ["êµ­ì™•ì—ê²Œ ê¶Œë ¥ì„ ìœ„ì„ë°›ì€ íŠ¹ì •ì¸/ì™¸ì²™ì˜ ë…ê³¼ì ì  ì •ì¹˜", "ì™•ì´ ëª¨ë“  ê¶Œë ¥ì„ í–‰ì‚¬í•˜ëŠ” ì •ì¹˜", "ë°±ì„±ì´ ì£¼ì¸ì´ ë˜ëŠ” ì •ì¹˜", "ì‹ í•˜ë“¤ì´ í† ë¡ í•˜ëŠ” ì •ì¹˜"],
                correct: 0,
                desc: "ìë£Œ í•˜ë‹¨ì— ì„¸ë„ ì •ì¹˜ì˜ ì •ì˜ê°€ 'íŠ¹ì •ì¸ê³¼ ê·¸ ì¶”ì¢… ì„¸ë ¥ ë° ì™¸ì²™ ê°€ë¬¸ë“¤ì˜ ê°œì…... ë…ê³¼ì ì  ì •ì¹˜ í˜•íƒœ'ë¡œ ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ì„¸ë„ ì •ì¹˜ëŠ” ëˆ„êµ¬ì˜ ê°œì…ì— ì˜í•´ ì´ë£¨ì–´ì§„ ì •ì¹˜ í˜•íƒœì¸ê°€ìš”?",
                a: ["íŠ¹ì •ì¸, ì¶”ì¢…ì„¸ë ¥, ì™¸ì²™ ê°€ë¬¸", "ì™•ê³¼ ì„¸ì", "ì²­ë‚˜ë¼ì™€ ì¼ë³¸", "ë†ë¯¼ê³¼ ìƒì¸"],
                correct: 0,
                desc: "ìë£Œ ì •ì˜ì— 'íŠ¹ì •ì¸ê³¼ ê·¸ ì¶”ì¢… ì„¸ë ¥ ë° ì™¸ì²™ ê°€ë¬¸ë“¤ì˜ ê°œì…'ì´ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },

            // [2ì°¨ ê°‘ì˜¤ê°œí˜ - ê¸°ë³¸]
            {
                q: "2ì°¨ ê°‘ì˜¤ê°œí˜ ë•Œ ì¡°ì„ ì´ ë‚˜ê°ˆ ê·¼ëŒ€ì  ë°©í–¥ì„ ì œì‹œí•˜ë©° ë°œí‘œí•œ ë¬¸ì„œëŠ”?",
                a: ["í™ë²” 14ì¡°", "í—Œì˜ 6ì¡°", "ë…ë¦½ ì„ ì–¸ë¬¸", "ëŒ€í•œêµ­ êµ­ì œ"],
                correct: 0,
                desc: "ìë£Œ 6í˜ì´ì§€ì— 'í™ë²” 14ì¡° ë°œí‘œ : ì¡°ì„ ì´ ë‚˜ê°ˆ ê·¼ëŒ€ì  ë°©í–¥ì„ ì œì‹œí•œ ë¬¸ì„œ'ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "2ì°¨ ê°‘ì˜¤ê°œí˜ì—ì„œ ê·¼ëŒ€ì  ê´€ë£Œì œ í™•ë¦½ì„ ìœ„í•´ ê°•í™”í•œ ê²ƒì€?",
                a: ["ë‚´ê° ì¤‘ì‹¬ì œ", "ì™•ê¶Œ", "ì˜íšŒ ê¶Œí•œ", "ì§€ë°© ì‚¬ë˜ ê¶Œí•œ"],
                correct: 0,
                desc: "ìë£Œì— 'ë‚´ê° ì¤‘ì‹¬ì œ ê°•í™” : ê·¼ëŒ€ì  ê´€ë£Œì œ í™•ë¦½'ì´ë¼ê³  ëª…ì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "2ì°¨ ê°‘ì˜¤ê°œí˜ ê²½ì œ ë¶„ì•¼ì—ì„œ êµ­ê°€ ì¬ì •ì˜ íˆ¬ëª…í•œ ê´€ë¦¬ë¥¼ ìœ„í•´ ë„ì…í•œ ê²ƒì€?",
                a: ["ì˜ˆì‚°ì œ", "í˜¸í¬ì œ", "ê²°ì‘", "ë‹¹ë°±ì „"],
                correct: 0,
                desc: "ìë£Œì— 'ì˜ˆì‚°ì œ ë„ì… : êµ­ê°€ ì¬ì •ì„ íˆ¬ëª…í•˜ê²Œ ê´€ë¦¬í•˜ê³ ì ê·¼ëŒ€ì  ì œë„ ë„ì…'ì´ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "2ì°¨ ê°‘ì˜¤ê°œí˜ì—ì„œ ì‹¤ì‹œí•œ í™”í ì œë„ëŠ”?",
                a: ["ì€ë³¸ìœ„ í™”í ì œë„", "ê¸ˆë³¸ìœ„ í™”í ì œë„", "ë™ì „ ì „ìš© ì œë„", "ì§€í ì‚¬ìš© ê¸ˆì§€"],
                correct: 0,
                desc: "ìë£Œì— 'ì€ë³¸ìœ„ í™”í ì œë„ : ì¡°ì„  ê²½ì œì˜ ê·¼ëŒ€í™”'ë¼ê³  ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "2ì°¨ ê°‘ì˜¤ê°œí˜ êµ°ì‚¬ ë¶„ì•¼ ê°œí¸ì˜ ëª©ì ì€?",
                a: ["ì¤‘ì•™ ì •ë¶€ì˜ êµ°ì‚¬ë ¥ ê°•í™”", "ì§€ë°© êµ°ì‚¬ë ¥ ê°•í™”", "í•´êµ°ë ¥ ì¦ê°•", "ì™¸êµ­ êµ°ëŒ€ ìœ ì¹˜"],
                correct: 0,
                desc: "ìë£Œì— 'êµ°ì‚¬ ì œë„ ê°œí¸ : ì¤‘ì•™ ì •ë¶€ì˜ êµ°ì‚¬ë ¥ ê°•í™”'ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },

            // [2ì°¨ ê°‘ì˜¤ê°œí˜ - ì‹¬í™”/ì„¸ë¶€]
            {
                q: "2ì°¨ ê°‘ì˜¤ê°œí˜ ê²½ì œ ê°œí˜ ì¤‘ 'ì¡°ì„  ê²½ì œì˜ ê·¼ëŒ€í™”'ì™€ ì§ì ‘ ì—°ê²°ëœ ê²ƒì€?",
                a: ["ì€ë³¸ìœ„ í™”í ì œë„", "ë„ëŸ‰í˜• í†µì¼", "ì¡°ì„¸ ê¸ˆë‚©í™”", "í† ì§€ ì¡°ì‚¬"],
                correct: 0,
                desc: "ìë£Œì— 'ì€ë³¸ìœ„ í™”í ì œë„ : ì¡°ì„  ê²½ì œì˜ ê·¼ëŒ€í™”'ë¼ê³  ì§ì§€ì–´ì ¸ ìˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ë‹¤ìŒ ì¤‘ 2ì°¨ ê°‘ì˜¤ê°œí˜ì˜ ì •ì¹˜ì  ê°œí˜ ë‚´ìš©ì´ ì•„ë‹Œ ê²ƒì€?",
                a: ["ê³¼ê±°ì œ íì§€", "í™ë²” 14ì¡° ë°œí‘œ", "ë‚´ê° ì¤‘ì‹¬ì œ ê°•í™”", "ê·¼ëŒ€ì  ê´€ë£Œì œ í™•ë¦½"],
                correct: 0,
                desc: "ê³¼ê±°ì œ íì§€ëŠ” '1ì°¨ ê°‘ì˜¤ê°œí˜'ì˜ ë‚´ìš©ì…ë‹ˆë‹¤. 2ì°¨ëŠ” í™ë²” 14ì¡°ì™€ ë‚´ê° ì¤‘ì‹¬ì œ ê°•í™”ì…ë‹ˆë‹¤."
            },
            {
                q: "ì˜ˆì‚°ì œ ë„ì…ì˜ ì£¼ëœ ëª©ì ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                a: ["êµ­ê°€ ì¬ì •ì˜ íˆ¬ëª…í•œ ê´€ë¦¬", "ì„¸ê¸ˆ ìˆ˜ì… ì¦ëŒ€", "ì™•ì‹¤ ì¬ì • í™•ëŒ€", "ì™¸ì±„ ìƒí™˜"],
                correct: 0,
                desc: "ìë£Œì— 'êµ­ê°€ ì¬ì •ì„ íˆ¬ëª…í•˜ê²Œ ê´€ë¦¬í•˜ê³ ì' ë„ì…í–ˆë‹¤ê³  ì„¤ëª…ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            },
            
            // [ì¢…í•©/ë¹„êµ]
            {
                q: "ê°‘ì‹ ì •ë³€ê³¼ 1ì°¨ ê°‘ì˜¤ê°œí˜ì˜ ê³µí†µì ì€?",
                a: ["ì‹ ë¶„ì œ íì§€ ì£¼ì¥", "ì²­ë‚˜ë¼ì˜ ì§€ì›", "3ì¼ ë§Œì— ì¢…ë£Œ", "ì™•ê¶Œ ê°•í™”"],
                correct: 0,
                desc: "ê°‘ì‹ ì •ë³€(ì¸ë¯¼ í‰ë“±)ê³¼ 1ì°¨ ê°‘ì˜¤ê°œí˜(ì‹ ë¶„ì œ íì§€) ëª¨ë‘ ì‹ ë¶„ì œ ì² íë¥¼ ì£¼ì¥í–ˆìŠµë‹ˆë‹¤."
            },
            {
                q: "ë‹¤ìŒ ì‚¬ê±´ë“¤ì„ ì‹œê°„ ìˆœì„œëŒ€ë¡œ ë°”ë¥´ê²Œ ë‚˜ì—´í•œ ê²ƒì€?",
                a: ["ê°‘ì‹ ì •ë³€ â†’ 1ì°¨ ê°‘ì˜¤ê°œí˜ â†’ 2ì°¨ ê°‘ì˜¤ê°œí˜", "1ì°¨ ê°‘ì˜¤ê°œí˜ â†’ ê°‘ì‹ ì •ë³€ â†’ 2ì°¨ ê°‘ì˜¤ê°œí˜", "ê°‘ì‹ ì •ë³€ â†’ 2ì°¨ ê°‘ì˜¤ê°œí˜ â†’ 1ì°¨ ê°‘ì˜¤ê°œí˜", "2ì°¨ ê°‘ì˜¤ê°œí˜ â†’ 1ì°¨ ê°‘ì˜¤ê°œí˜ â†’ ê°‘ì‹ ì •ë³€"],
                correct: 0,
                desc: "ê°‘ì‹ ì •ë³€ì€ 1884ë…„, ê°‘ì˜¤ê°œí˜ì€ 1894ë…„ì— 1ì°¨, 2ì°¨ê°€ ìˆœì„œëŒ€ë¡œ ì§„í–‰ë˜ì—ˆìŠµë‹ˆë‹¤."
            }
        ];

        let questions = []; 

        const game = {
            currentIdx: 0,
            score: 0,
            isAnswering: false,

            start: function() {
                this.currentIdx = 0;
                this.score = 0;
                
                // ë¬¸ì œ ì„ê¸° (ëœë¤)
                questions = [...questionsSource];
                for (let i = questions.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [questions[i], questions[j]] = [questions[j], questions[i]];
                }

                document.getElementById('q-total').innerText = questions.length;
                document.getElementById('start-screen').classList.add('hidden');
                document.getElementById('quiz-screen').classList.remove('hidden');
                document.getElementById('result-screen').classList.add('hidden');
                document.getElementById('progress-container').classList.remove('hidden');
                this.renderQuestion();
            },

            renderQuestion: function() {
                this.isAnswering = true;
                const q = questions[this.currentIdx];
                
                document.getElementById('q-current').innerText = this.currentIdx + 1;
                document.getElementById('score-badge').innerText = this.score + "ì ";
                document.getElementById('question-text').innerText = q.q;
                
                const percent = ((this.currentIdx) / questions.length) * 100;
                document.getElementById('progress-bar').style.width = percent + "%";

                const optionsArea = document.getElementById('options-area');
                optionsArea.innerHTML = '';
                
                document.getElementById('feedback-area').classList.add('hidden');
                document.getElementById('ai-response-area').classList.add('hidden');
                document.getElementById('ai-btn').classList.remove('hidden');
                document.getElementById('ai-btn').innerHTML = '<i class="fas fa-robot"></i> AI ì„ ìƒë‹˜ê»˜ ìì„¸í•œ í•´ì„¤ ë“£ê¸°';
                document.getElementById('ai-btn').disabled = false;

                // ë³´ê¸° ì„ê¸°
                let options = q.a.map((text, idx) => ({ text, isCorrect: idx === q.correct }));
                for (let i = options.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [options[i], options[j]] = [options[j], options[i]];
                }

                options.forEach((opt) => {
                    const btn = document.createElement('button');
                    btn.className = "w-full text-left p-4 rounded-xl border-2 border-orange-100 hover:border-orange-400 hover:bg-orange-50 transition duration-200 font-medium text-gray-700 active:scale-95 text-xl";
                    btn.innerText = opt.text;
                    btn.onclick = () => this.checkAnswer(opt.isCorrect, btn, options, q.desc);
                    optionsArea.appendChild(btn);
                });
            },

            checkAnswer: function(isCorrect, btnClicked, options, desc) {
                if(!this.isAnswering) return;
                this.isAnswering = false;

                const buttons = document.getElementById('options-area').children;

                // 40ë¬¸ì œì´ë¯€ë¡œ í•œ ë¬¸ì œë‹¹ 2.5ì 
                if(isCorrect) {
                    this.score += 2.5; 
                    btnClicked.classList.add('bg-orange-100', 'border-orange-500', 'text-orange-900');
                    this.showFeedback(true, desc);
                } else {
                    btnClicked.classList.add('bg-red-100', 'border-red-500', 'text-red-900');
                    // ì •ë‹µ í‘œì‹œ
                    for(let i=0; i<options.length; i++) {
                        if(options[i].isCorrect) {
                            buttons[i].classList.add('bg-orange-100', 'border-orange-500', 'text-orange-900');
                        }
                    }
                    this.showFeedback(false, desc);
                }
                
                document.getElementById('score-badge').innerText = Math.floor(this.score) + "ì ";
            },

            showFeedback: function(isCorrect, desc) {
                const fbArea = document.getElementById('feedback-area');
                const icon = document.getElementById('feedback-icon');
                const result = document.getElementById('feedback-result');
                const detail = document.getElementById('feedback-detail');

                fbArea.classList.remove('hidden');
                
                if(isCorrect) {
                    icon.innerHTML = '<i class="fas fa-check-circle text-orange-500 correct-anim"></i>';
                    result.innerText = "ì •ë‹µì…ë‹ˆë‹¤!";
                    result.className = "text-xl text-orange-600";
                } else {
                    icon.innerHTML = '<i class="fas fa-times-circle text-red-500 wrong-anim"></i>';
                    result.innerText = "ì•„ì‰½ë„¤ìš”!";
                    result.className = "text-xl text-red-600";
                }
                detail.innerText = desc;
            },

            askAI: async function() {
                const q = questions[this.currentIdx];
                const btn = document.getElementById('ai-btn');
                const output = document.getElementById('ai-response-area');
                
                btn.innerHTML = '<span class="loader mr-2"></span> ì„ ìƒë‹˜ì´ ìƒê° ì¤‘ì´ì—ìš”...';
                btn.disabled = true;

                try {
                    const correctText = q.a[q.correct];
                    const prompt = `
                        ë„ˆëŠ” ì¹œì ˆí•˜ê³  í•´ë°•í•œ í•œêµ­ì‚¬ ì„ ìƒë‹˜ì´ì•¼.
                        ì´ˆë“±í•™êµ~ì¤‘í•™êµ ìˆ˜ì¤€ì˜ í•™ìƒì—ê²Œ ì•„ë˜ ì—­ì‚¬ ë¬¸ì œì— ëŒ€í•´ ì‰½ê³  ì¬ë¯¸ìˆê²Œ ì„¤ëª…í•´ì¤˜.
                        
                        [ë¬¸ì œ] ${q.q}
                        [ì •ë‹µ] ${correctText}
                        [í•µì‹¬ ì„¤ëª…] ${q.desc}
                        
                        ìš”ì²­ì‚¬í•­:
                        1. ì •ë‹µì´ ì™œ ì •ë‹µì¸ì§€ ë°°ê²½ ì´ì•¼ê¸°ë¥¼ í¬í•¨í•´ì„œ ì„¤ëª…í•´ì¤˜.
                        2. ì¤‘ìš”í•œ ì—­ì‚¬ì  ì˜ì˜ë¥¼ í•œ ì¤„ ìš”ì•½í•´ì¤˜.
                        3. ë§íˆ¬ëŠ” ì¹œì ˆí•˜ê²Œ "í•´ìš”"ì²´ë¥¼ ì¨ì¤˜.
                        4. ë„ˆë¬´ ê¸¸ì§€ ì•Šê²Œ 300ì ë‚´ì™¸ë¡œ í•µì‹¬ë§Œ ìš”ì•½í•´ì¤˜.
                    `;

                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                    });

                    if (!response.ok) throw new Error('API í˜¸ì¶œ ì‹¤íŒ¨');

                    const data = await response.json();
                    const text = data.candidates[0].content.parts[0].text;
                    const formattedText = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br>');

                    output.innerHTML = formattedText;
                    output.classList.remove('hidden');
                    btn.classList.add('hidden');

                } catch (error) {
                    console.error(error);
                    btn.innerHTML = '<i class="fas fa-exclamation-circle"></i> ì„ ìƒë‹˜ì´ ë°”ë¹ ìš”. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
                    btn.disabled = false;
                }
            },

            nextQuestion: function() {
                this.currentIdx++;
                if(this.currentIdx < questions.length) {
                    this.renderQuestion();
                } else {
                    this.finishGame();
                }
            },

            finishGame: function() {
                document.getElementById('quiz-screen').classList.add('hidden');
                document.getElementById('feedback-area').classList.add('hidden');
                document.getElementById('progress-container').classList.add('hidden');
                document.getElementById('result-screen').classList.remove('hidden');

                const finalScore = Math.floor(this.score);
                document.getElementById('final-score').innerText = finalScore;
                
                // 40ë¬¸ì œ ê¸°ì¤€ í¼ì„¼íŠ¸ ê³„ì‚° (100ì  ë§Œì  ê¸°ì¤€ ì ìˆ˜ì™€ ë™ì¼)
                const percent = finalScore; 
                document.getElementById('final-percent').innerText = percent + "%";
                document.getElementById('result-bar').style.width = percent + "%";

                let msg = "";
                if(finalScore == 100) {
                    msg = "ì™„ë²½í•´ìš”!! ëª¨ë‘ ì´í•´í•˜ê³  ê³„ì‹œë„¤ìš”! ğŸ†";
                } else if(finalScore >= 80) {
                    msg = "ì°¸ ì˜í–ˆì–´ìš”! ê±°ì˜ ì´í•´í•˜ê³  ê³„ì‹œë„¤ìš”. ğŸ†";
                } else if(finalScore >= 50) {
                    msg = "ë³´í†µì´ì—ìš”. ì¡°ê¸ˆë§Œ ë” ë…¸ë ¥í•˜ë©´ ì™„ë²½í•´ì§ˆ ê±°ì˜ˆìš”. ğŸ‘";
                } else {
                    msg = "ì•„ì‰¬ì›Œìš”. ë‹¤ì‹œ ìˆ˜ì—…ì„ ë“¤ì–´ì•¼ í•  ê²ƒ ê°™ì•„ìš”. ğŸ“š";
                }
                
                document.getElementById('result-msg').innerText = msg;
            },
            
            restart: function() { this.start(); }
        };
    </script>
</body>
</html>
